!function(e){function t(e,t,a,r,s,n,i){var u=new Date(e,t,a,r||0,s||0,n||0,i||0);return 23==u.getHours()&&0===(r||0)&&u.setHours(u.getHours()+2),u}var a=mobiscroll,r=a.$;a.util.datetime={defaults:{shortYearCutoff:"+10",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["S","M","T","W","T","F","S"],amText:"am",pmText:"pm",getYear:function(e){return e.getFullYear()},getMonth:function(e){return e.getMonth()},getDay:function(e){return e.getDate()},getDate:t,getMaxDayOfMonth:function(e,t){return 32-new Date(e,t,32,12).getDate()},getWeekNumber:function(e){e=new Date(e),e.setHours(0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7));var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+1)/7)}},adjustedDate:t,formatDate:function(e,t,s){if(!t)return null;var n,i,u=r.extend({},a.util.datetime.defaults,s),o=function(t){for(var a=0;n+1<e.length&&e.charAt(n+1)==t;)a++,n++;return a},l=function(e,t,a){var r=""+t;if(o(e))for(;r.length<a;)r="0"+r;return r},d=function(e,t,a,r){return o(e)?r[t]:a[t]},m="",f=!1;for(n=0;n<e.length;n++)if(f)"'"!=e.charAt(n)||o("'")?m+=e.charAt(n):f=!1;else switch(e.charAt(n)){case"d":m+=l("d",u.getDay(t),2);break;case"D":m+=d("D",t.getDay(),u.dayNamesShort,u.dayNames);break;case"o":m+=l("o",(t.getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5,3);break;case"m":m+=l("m",u.getMonth(t)+1,2);break;case"M":m+=d("M",u.getMonth(t),u.monthNamesShort,u.monthNames);break;case"y":i=u.getYear(t),m+=o("y")?i:(i%100<10?"0":"")+i%100;break;case"h":var c=t.getHours();m+=l("h",c>12?c-12:0===c?12:c,2);break;case"H":m+=l("H",t.getHours(),2);break;case"i":m+=l("i",t.getMinutes(),2);break;case"s":m+=l("s",t.getSeconds(),2);break;case"a":m+=t.getHours()>11?u.pmText:u.amText;break;case"A":m+=t.getHours()>11?u.pmText.toUpperCase():u.amText.toUpperCase();break;case"'":o("'")?m+="'":f=!0;break;default:m+=e.charAt(n)}return m},parseDate:function(e,t,s){var n=r.extend({},a.util.datetime.defaults,s),i=n.defaultValue&&n.defaultValue.getTime?n.defaultValue:new Date;if(!e||!t)return i;if(t.getTime)return t;t="object"==typeof t?t.toString():t+"";var u,o=n.shortYearCutoff,l=n.getYear(i),d=n.getMonth(i)+1,m=n.getDay(i),f=-1,c=i.getHours(),h=i.getMinutes(),g=0,p=-1,y=!1,D=function(t){var a=u+1<e.length&&e.charAt(u+1)==t;return a&&u++,a},b=function(e){D(e);var a="@"==e?14:"!"==e?20:"y"==e?4:"o"==e?3:2,r=new RegExp("^\\d{1,"+a+"}"),s=t.substr(x).match(r);return s?(x+=s[0].length,parseInt(s[0],10)):0},T=function(e,a,r){var s,n=D(e)?r:a;for(s=0;s<n.length;s++)if(t.substr(x,n[s].length).toLowerCase()==n[s].toLowerCase())return x+=n[s].length,s+1;return 0},w=function(){x++},x=0;for(u=0;u<e.length;u++)if(y)"'"!=e.charAt(u)||D("'")?w():y=!1;else switch(e.charAt(u)){case"d":m=b("d");break;case"D":T("D",n.dayNamesShort,n.dayNames);break;case"o":f=b("o");break;case"m":d=b("m");break;case"M":d=T("M",n.monthNamesShort,n.monthNames);break;case"y":l=b("y");break;case"H":c=b("H");break;case"h":c=b("h");break;case"i":h=b("i");break;case"s":g=b("s");break;case"a":p=T("a",[n.amText,n.pmText],[n.amText,n.pmText])-1;break;case"A":p=T("A",[n.amText,n.pmText],[n.amText,n.pmText])-1;break;case"'":D("'")?w():y=!0;break;default:w()}if(l<100&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=("string"!=typeof o?o:(new Date).getFullYear()%100+parseInt(o,10))?0:-100)),f>-1)for(d=1,m=f;;){var M=32-new Date(l,d-1,32,12).getDate();if(m<=M)break;d++,m-=M}c=p==-1?c:p&&c<12?c+12:p||12!=c?c:0;var v=n.getDate(l,d-1,m,c,h,g);return n.getYear(v)!=l||n.getMonth(v)+1!=d||n.getDay(v)!=m?i:v}}}(),function(e){var t=mobiscroll,a=t.$,r=t.util.datetime,s=r.adjustedDate,n=new Date,i={startYear:n.getFullYear()-100,endYear:n.getFullYear()+1,separator:" ",dateFormat:"mm/dd/yy",dateDisplay:"MMddyy",timeFormat:"h:ii A",dayText:"Day",monthText:"Month",yearText:"Year",hourText:"Hours",minuteText:"Minutes",ampmText:"&nbsp;",secText:"Seconds",nowText:"Now",todayText:"Today"},u=function(n){function u(e,t,a,r){return Math.min(r,Math.floor(e/t)*t+a)}function o(e){return e<10?"0"+e:e}function l(e){var t,a,r,n=[];if(e){for(t=0;t<e.length;t++)if(a=e[t],a.start&&a.start.getTime)for(r=new Date(a.start);r<=a.end;)n.push(s(r.getFullYear(),r.getMonth(),r.getDate())),r.setDate(r.getDate()+1);else n.push(a);return n}return e}function d(e,t,a){return Math.floor((a-t)/e)*e+t}function m(e){return{value:e,display:(/yy/i.test(Q)?e:(e+"").substr(2,2))+(z.yearSuffix||"")}}function f(e){return e}function c(e){return z.getYear(e)}function h(e){return z.getMonth(e)}function g(e){return z.getDay(e)}function p(e){var t=e.getHours();return t=se&&t>=12?t-12:t,u(t,ue,me,he)}function y(e){return u(e.getMinutes(),oe,fe,ge)}function D(e){return u(e.getSeconds(),le,ce,pe)}function b(e){return e.getMilliseconds()}function T(e){return e.getHours()>11?1:0}function w(e){return e.getFullYear()+"-"+o(e.getMonth()+1)+"-"+o(e.getDate())}function x(e){return u(Math.round((e.getTime()-new Date(e).setHours(0,0,0,0))/1e3),J,0,86400)}function M(t,a,r,s){var n;return I[a]===e||(n=+t[I[a]],isNaN(n))?r?we[a](r):$[a]!==e?$[a]:we[a](s):n}function v(t){var a,r=new Date((new Date).setHours(0,0,0,0));if(null===t)return t;I.dd!==e&&(a=t[I.dd].split("-"),a=new Date(a[0],a[1]-1,a[2])),I.tt!==e&&(a=a||r,a=new Date(a.getTime()+t[I.tt]%86400*1e3));var s=M(t,"y",a,r),n=M(t,"m",a,r),i=Math.min(M(t,"d",a,r),z.getMaxDayOfMonth(s,n)),u=M(t,"h",a,r);return z.getDate(s,n,i,se&&M(t,"a",a,r)?u+12:u,M(t,"i",a,r),M(t,"s",a,r),M(t,"u",a,r))}function k(t,a){var r,s,n=["y","m","d","a","h","i","s","u","dd","tt"],i=[];if(null===t||t===e)return t;for(r=0;r<n.length;r++)s=n[r],I[s]!==e&&(i[I[s]]=we[s](t)),a&&($[r]=we[s](t));return i}function H(e,t){return t?Math.floor(new Date(e)/864e5):e.getMonth()+12*(e.getFullYear()-1970)}function Y(e){var t=/d/i.test(e);return{label:"",cssClass:"mbsc-dt-whl-date",min:H(w(te),t),max:H(w(ae),t),data:function(a){var s=new Date((new Date).setHours(0,0,0,0)),n=t?new Date(864e5*a):new Date(1970,a,1);return t&&(n=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())),{invalid:t&&!C(n,!0),value:w(n),display:s.getTime()==n.getTime()?z.todayText:r.formatDate(e,n,z)}},getIndex:function(e){return H(e,t)}}}function F(e){var t,a,s,n=[];for(/s/i.test(e)?a=le:/i/i.test(e)?a=60*oe:/h/i.test(e)&&(a=3600*ue),J=be.tt=a,t=0;t<86400;t+=a)s=new Date((new Date).setHours(0,0,0,0)+1e3*t),n.push({value:t,display:r.formatDate(e,s,z)});return{label:"",cssClass:"mbsc-dt-whl-time",data:n}}function S(){var t,a,r,s,n,i,u,l,d=0,c=[],h=[],g=[];if(R.match(/date/i)){for(t=K.split(/\|/.test(K)?"|":""),s=0;s<t.length;s++)if(r=t[s],i=0,r.length)if(/y/i.test(r)&&i++,/m/i.test(r)&&i++,/d/i.test(r)&&i++,i>1&&I.dd===e)I.dd=d,d++,h.push(Y(r)),g=h,O=!0;else if(/y/i.test(r)&&I.y===e)I.y=d,d++,h.push({cssClass:"mbsc-dt-whl-y",label:z.yearText,min:z.getYear(te),max:z.getYear(ae),data:m,getIndex:f});else if(/m/i.test(r)&&I.m===e){for(I.m=d,u=[],d++,n=0;n<12;n++)l=Q.replace(/[dy]/gi,"").replace(/mm/,o(n+1)+(z.monthSuffix||"")).replace(/m/,n+1+(z.monthSuffix||"")),u.push({value:n,display:/MM/.test(l)?l.replace(/MM/,'<span class="mbsc-dt-month">'+z.monthNames[n]+"</span>"):l.replace(/M/,'<span class="mbsc-dt-month">'+z.monthNamesShort[n]+"</span>")});h.push({cssClass:"mbsc-dt-whl-m",label:z.monthText,data:u})}else if(/d/i.test(r)&&I.d===e){for(I.d=d,u=[],d++,n=1;n<32;n++)u.push({value:n,display:(/dd/i.test(Q)?o(n):n)+(z.daySuffix||"")});h.push({cssClass:"mbsc-dt-whl-d",label:z.dayText,data:u})}c.push(h)}if(R.match(/time/i)){for(a=P.split(/\|/.test(P)?"|":""),s=0;s<a.length;s++)if(r=a[s],i=0,r.length&&(/h/i.test(r)&&i++,/i/i.test(r)&&i++,/s/i.test(r)&&i++,/a/i.test(r)&&i++),i>1&&I.tt===e)I.tt=d,d++,g.push(F(r));else if(/h/i.test(r)&&I.h===e){for(u=[],I.h=d,d++,n=me;n<(se?12:24);n+=ue)u.push({value:n,display:se&&0===n?12:/hh/i.test(X)?o(n):n});g.push({cssClass:"mbsc-dt-whl-h",label:z.hourText,data:u})}else if(/i/i.test(r)&&I.i===e){for(u=[],I.i=d,d++,n=fe;n<60;n+=oe)u.push({value:n,display:/ii/i.test(X)?o(n):n});g.push({cssClass:"mbsc-dt-whl-i",label:z.minuteText,data:u})}else if(/s/i.test(r)&&I.s===e){for(u=[],I.s=d,d++,n=ce;n<60;n+=le)u.push({value:n,display:/ss/i.test(X)?o(n):n});g.push({cssClass:"mbsc-dt-whl-s",label:z.secText,data:u})}else/a/i.test(r)&&I.a===e&&(I.a=d,d++,g.push({cssClass:"mbsc-dt-whl-a",label:z.ampmText,data:/A/.test(r)?[{value:0,display:z.amText.toUpperCase()},{value:1,display:z.pmText.toUpperCase()}]:[{value:0,display:z.amText},{value:1,display:z.pmText}]}));g!=h&&c.push(g)}return c}function N(e){var t,a,s,n={};if(e.is("input")){switch(e.attr("type")){case"date":t="yy-mm-dd";break;case"datetime":t="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":t="yy-mm-ddTHH:ii:ss";break;case"month":t="yy-mm",n.dateOrder="mmyy";break;case"time":t="HH:ii:ss"}n.format=t,a=e.attr("min"),s=e.attr("max"),a&&(n.min=r.parseDate(t,a)),s&&(n.max=r.parseDate(t,s))}return n}function A(e,t){var a,r,s=!1,n=!1,i=0,u=0;if(te=v(k(te)),ae=v(k(ae)),C(e))return e;if(e<te&&(e=te),e>ae&&(e=ae),a=e,r=e,2!==t)for(s=C(a);!s&&a<ae;)a=new Date(a.getTime()+864e5),s=C(a),i++;if(1!==t)for(n=C(r);!n&&r>te;)r=new Date(r.getTime()-864e5),n=C(r),u++;return 1===t&&s?a:2===t&&n?r:u<=i&&n?r:a}function C(e,t){return!(!t&&e<te)&&(!(!t&&e>ae)&&(!!V(e,E)||!V(e,B)))}function V(e,t){var a,r,s;if(t)for(r=0;r<t.length;r++)if(a=t[r],s=a+"",!a.start)if(a.getTime){if(e.getFullYear()==a.getFullYear()&&e.getMonth()==a.getMonth()&&e.getDate()==a.getDate())return!0}else if(s.match(/w/i)){if(s=+s.replace("w",""),s==e.getDay())return!0}else if(s=s.split("/"),s[1]){if(s[0]-1==e.getMonth()&&s[1]==e.getDate())return!0}else if(s[0]==e.getDate())return!0;return!1}function W(e,t,a,r,s,n,i){var u,o,l,d;if(e)for(o=0;o<e.length;o++)if(u=e[o],d=u+"",!u.start)if(u.getTime)z.getYear(u)==t&&z.getMonth(u)==a&&(n[z.getDay(u)]=i);else if(d.match(/w/i))for(d=+d.replace("w",""),l=d-r;l<s;l+=7)l>=0&&(n[l+1]=i);else d=d.split("/"),d[1]?d[0]-1==a&&(n[d[1]]=i):n[d[0]]=i}function U(t,a,r,s,n,i,o,l){var d,m,f,c,h,g,p,y,D,b,T,w,x,M,v,k,H,Y,F,S,N={},A=z.getDate(s,n,i),C=["a","h","i","s"];if(t){for(p=0;p<t.length;p++)T=t[p],T.start&&(T.apply=!1,f=T.d,H=f+"",Y=H.split("/"),f&&(f.getTime&&s==z.getYear(f)&&n==z.getMonth(f)&&i==z.getDay(f)||!H.match(/w/i)&&(Y[1]&&i==Y[1]&&n==Y[0]-1||!Y[1]&&i==Y[0])||H.match(/w/i)&&A.getDay()==+H.replace("w",""))&&(T.apply=!0,N[A]=!0));for(p=0;p<t.length;p++)if(T=t[p],d=0,k=0,y=ye[r],D=De[r],M=!0,v=!0,m=!1,T.start&&(T.apply||!T.d&&!N[A])){for(w=T.start.split(":"),x=T.end.split(":"),b=0;b<3;b++)w[b]===e&&(w[b]=0),x[b]===e&&(x[b]=59),w[b]=+w[b],x[b]=+x[b];if("tt"==r)y=u(Math.round((new Date(A).setHours(w[0],w[1],w[2])-new Date(A).setHours(0,0,0,0))/1e3),J,0,86400),D=u(Math.round((new Date(A).setHours(x[0],x[1],x[2])-new Date(A).setHours(0,0,0,0))/1e3),J,0,86400);else{for(w.unshift(w[0]>11?1:0),x.unshift(x[0]>11?1:0),se&&(w[1]>=12&&(w[1]=w[1]-12),x[1]>=12&&(x[1]=x[1]-12)),b=0;b<a;b++)_[b]!==e&&(F=u(w[b],be[C[b]],ye[C[b]],De[C[b]]),S=u(x[b],be[C[b]],ye[C[b]],De[C[b]]),c=0,h=0,g=0,se&&1==b&&(c=w[0]?12:0,h=x[0]?12:0,g=_[0]?12:0),M||(F=0),v||(S=De[C[b]]),(M||v)&&F+c<_[b]+g&&_[b]+g<S+h&&(m=!0),_[b]!=F&&(M=!1),_[b]!=S&&(v=!1));if(!l)for(b=a+1;b<4;b++)w[b]>0&&(d=be[r]),x[b]<De[C[b]]&&(k=be[r]);m||(F=u(w[a],be[r],ye[r],De[r])+d,S=u(x[a],be[r],ye[r],De[r])-k,M&&(y=F),v&&(D=S))}if(M||v||m)for(b=y;b<=D;b+=be[r])o[b]=!l}}}var J,O,j,I={},$={},_=[],L=N(a(this)),q=a.extend({},n.settings),z=a.extend(n.settings,t.util.datetime.defaults,i,L,q),B=l(z.invalid),E=l(z.valid),R=z.preset,Z="datetime"==R?z.dateFormat+z.separator+z.timeFormat:"time"==R?z.timeFormat:z.dateFormat,G=L.format||Z,K=z.dateWheels||z.dateFormat,P=z.timeWheels||z.timeFormat,Q=z.dateWheels||z.dateDisplay,X=P,ee=z.baseTheme||z.theme,te=z.min||s(z.startYear,0,1),ae=z.max||s(z.endYear,11,31,23,59,59),re=/time/i.test(R),se=/h/.test(X),ne=/D/.test(Q),ie=z.steps||{},ue=ie.hour||z.stepHour||1,oe=ie.minute||z.stepMinute||1,le=ie.second||z.stepSecond||1,de=ie.zeroBased,me=de?0:te.getHours()%ue,fe=de?0:te.getMinutes()%oe,ce=de?0:te.getSeconds()%le,he=d(ue,me,se?11:23),ge=d(oe,fe,59),pe=d(oe,fe,59),ye={y:te.getFullYear(),m:0,d:1,h:me,i:fe,s:ce,a:0,tt:0},De={y:ae.getFullYear(),m:11,d:31,h:he,i:ge,s:pe,a:1,tt:86400},be={y:1,m:1,d:1,h:ue,i:oe,s:le,a:1,tt:1},Te={"android-holo":40,bootstrap:46,ios:50,jqm:46,material:46,mobiscroll:46,wp:50},we={y:c,m:h,d:g,h:p,i:y,s:D,u:b,a:T,dd:w,tt:x};return n.getDate=n.getVal=function(e){return n._hasValue||e?v(n.getArrayVal(e)):null},n.setDate=function(e,t,a,r,s){n.setArrayVal(k(e),t,s,r,a)},j=S(),n.format=Z,n.order=I,n.handlers.now=function(){n.setDate(new Date,n.live,1e3,!0,!0)},n.buttons.now={text:z.nowText,handler:"now"},{minWidth:O&&re?Te[ee]:e,compClass:"mbsc-dt",wheels:j,headerText:!!z.headerText&&function(){return r.formatDate(Z,v(n.getArrayVal(!0)),z)},formatValue:function(e){return r.formatDate(G,v(e),z)},parseValue:function(e){return e||($={}),k(e?r.parseDate(G,e,z):z.defaultValue&&z.defaultValue.getTime?z.defaultValue:new Date,!!e&&!!e.getTime)},validate:function(t){var r,s,i,u,o=t.values,l=t.index,d=t.direction,m=n.settings.wheels[0][I.d],f=A(v(o),d),c=k(f),h=[],g={},p=we.y(f),y=we.m(f),D=z.getMaxDayOfMonth(p,y),b=!0,T=!0;if(a.each(["dd","y","m","d","tt","a","h","i","s"],function(t,r){if(I[r]!==e){var n=ye[r],i=De[r],u=we[r](f);if(h[I[r]]=[],b&&te&&(n=we[r](te)),T&&ae&&(i=we[r](ae)),"y"!=r&&"dd"!=r)for(s=ye[r];s<=De[r];s+=be[r])(s<n||s>i)&&h[I[r]].push(s);if(u<n&&(u=n),u>i&&(u=i),b&&(b=u==n),T&&(T=u==i),"d"==r){var o=z.getDate(p,y,1).getDay(),l={};W(B,p,y,o,D,l,1),W(E,p,y,o,D,l,0),a.each(l,function(e,t){t&&h[I[r]].push(e)})}}}),re&&a.each(["a","h","i","s","tt"],function(t,r){var s=we[r](f),i=we.d(f),u={};I[r]!==e&&(U(B,t,r,p,y,i,u,0),U(E,t,r,p,y,i,u,1),a.each(u,function(e,t){t&&h[I[r]].push(e)}),_[t]=n.getValidValue(I[r],s,d,u))}),m&&(m._length!==D||ne&&(l===e||l===I.y||l===I.m))){for(g[I.d]=m,m.data=[],r=1;r<=D;r++)u=z.getDate(p,y,r).getDay(),i=Q.replace(/[my]/gi,"").replace(/dd/,(r<10?"0"+r:r)+(z.daySuffix||"")).replace(/d/,r+(z.daySuffix||"")),m.data.push({value:r,display:i.match(/DD/)?i.replace(/DD/,'<span class="mbsc-dt-day">'+z.dayNames[u]+"</span>"):i.replace(/D/,'<span class="mbsc-dt-day">'+z.dayNamesShort[u]+"</span>")});n._tempWheelArray[I.d]=c[I.d],n.changeWheel(g)}return{disabled:h,valid:c}}}};a.each(["date","time","datetime"],function(e,a){t.presets.scroller[a]=u})}(),function(){mobiscroll.$.each(["date","time","datetime"],function(e,t){mobiscroll.presetShort(t)})}();